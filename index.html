<html>
<head>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type"/>
</head>
<body>
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAG3RFWHRTb2Z0d2FyZQBDZWxzeXMgU3R1ZGlvIFRvb2zBp+F8AAABAUlEQVR42u3avQ3CQAyGYdywQZqswg4Mmx2yCg0bpDEtF510nxxffuB1FwnOnx6kYAfM3W9nKDMrgri77dIXAAAAAKAWQK1I0Fovfz/K1wxzs1dGZgAAAEAHWIesBVVAFIDq+9a9hDwAAAAAABKANJ0FQmZWCKnxgQAAAAD6MBW9eXXb5IRpMXUdBgAAAAAIrbEBJOUcAAAA4Jo3wa5IAAAAAABZAMo6/HouxfU43VNW5Kxe3Z8HAAAAAP8NcLYCAAAAjgXYcx0GAAAAADgcQPpDQhKAci4AAADAJAgAAAAAkALQAtkyHWZ8c1zmhxEAAPgRABVla6ie5wIAAAAAfNcHllVpru53rewAAAAASUVORK5CYII="
     id="pikachu" hidden/>
<canvas id="canvas" width="800" height="600"></canvas>
<script type="module">
      import init from './out/wasm_sprites.js';
      import { Game } from './out/wasm_sprites.js';
      async function run() {
        await init();

        const game = Game.new();

        let lastUpdateTime = Date.now();
        const update = function update() {
          const now = Date.now();
          const deltaTime = now - lastUpdateTime;
          lastUpdateTime = now;
          game.update(deltaTime);
          window.setTimeout(update, 0);
        }
        window.setTimeout(update, 0);

        const draw = function draw() {
          game.draw();
          window.requestAnimationFrame(draw);
        };
        window.requestAnimationFrame(draw);
      }
      run();
</script>
</body>
</html>
